version: "2"

services:
  - type: web
    name: todoapp
    env: docker
    dockerfilePath: ./Dockerfile
    dockerContext: .
    plan: free
    envVars:
      - key: APP_PORT
        value: 10000
      - key: PG_SSLMODE
        value: require
      - key: JWT_SECRET
        value: 1xFZvo0uC9wi6wcy35yuai3eG2nt5ngR8zB56dwpczc=
      - key: ADMIN_TOKEN
        value: admin_12345_secret
      - key: SMTP_HOST
        value: smtp.gmail.com
      - key: SMTP_PORT
        value: "587"
      - key: SMTP_USER
        value: test.t0d0.dimash@gmail.com
      - key: SMTP_PASS
        value: nres wobi oouf ecvb
      - key: SMTP_FROM
        value: test.t0d0.dimash@gmail.com
      - key: APP_BASE_URL
        value: https://your-app-name.onrender.com
      - key: LOGIN_MAX_FAIL
        value: "4"

databases:
  - name: todoapp-db
    plan: free